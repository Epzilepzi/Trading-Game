<html>
    <head>
        <title>Trading Game</title>
        <link rel=stylesheet type="text/css" href="game.css">
        <script>
            function buy(item){
                var gold = document.getElementById("gold");
                var itemCount = document.getElementById(item);
                var itemPrice = document.getElementById(item+"-cost");


                //alert(gold.innerHTML + " " + itemCount.innerHTML + " " + itemPrice.innerHTML);
                if(parseInt(gold.innerHTML) - parseInt(itemPrice.innerHTML) >= 0) {
                    itemCount.innerHTML = parseInt(itemCount.innerHTML) + 1;
                    gold.innerHTML = parseInt(gold.innerHTML) - parseInt(itemPrice.innerHTML);
                } else {
                    alert("You need more Moneyz!");
                }
            }

            function earnMoneyz() {
                var gold = document.getElementById("gold");
                var randomNumber = Math.floor(Math.random() * 21);

                gold.innerHTML = parseInt(gold.innerHTML) + parseInt(randomNumber);
            }

            function toggleMute() {
                var music = document.getElementById('backgroundMusic');

                if (music.muted === false) {
                    music.muted = true
                } else {
                    music.muted = false;
                    music.currentTime = 0;
                }
            }
        </script>
    </head>
    <body>
        <div id="header">
            <div id="title">
                <h1>Trading Game</h1>
            </div>
        </div>

        <div id="game">
            <audio id="backgroundMusic" autoplay="autoplay" loop>
                <source src="audio/bgmusic.mp3" hidden="true" autostart="true">
            </audio>
            <div id="moneyz">
                <p>Moneyz: <span id="gold">100</span></p>
                <button onclick="earnMoneyz()">Earn Moneyz!</button>
            </div>

            <div id="item">
                <p><strong>Coffee</strong></p>
                <p>Amount: <span id="coffee">0</span></p>
                <p>Cost: <span id="coffee-cost">10</span></p>
                <button onclick="buy('coffee')">Buy</button>
            
            </div>

            <div id="item">
                <p><strong>Pizza</strong></p>
                <p>Amount: <span id="pizza">0</span></p>
                <p>Cost: <span id="pizza-cost">35</span></p>
                <button onclick="buy('pizza')">Buy</button>
            </div>

            <div id="item">
                <p><strong>Tea</strong></p>
                <p>Amount: <span id="tea">0</span></p>
                <p>Cost: <span id="tea-cost">8</span></p>
                <button onclick="buy('tea')">Buy</button>
            </div>

            <div id="item">
                <p><strong>Burger</strong></p>
                <p>Amount: <span id="burger">0</span></p>
                <p>Cost: <span id="burger-cost">30</span></p>
                <button onclick="buy('burger')">Buy</button>
            </div>
        </div>

        <div id="footer">
            <button id="muteButton" onclick="toggleMute()">Mute Music</button>
            <p>Version: <span id="version">v0.0.1</span></p>
        <!-- the button onClick sends a quitAndInstall message to the electron main process -->
        <button id="ready" onClick="ipcRenderer.send('quitAndInstall')">No Updates Ready</button>
        </div>
        <script>
            const ipcRenderer = require('electron').ipcRenderer;
            // wait for an updateReady message
            ipcRenderer.on('updateReady', function(event, text) {
                // changes the text of the button
                var container = document.getElementById('ready');
                container.innerHTML = "Update Ready!";
            })
        </script>
    </body>
</html>